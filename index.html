<html lang="en" itemtype="http://schema.org/WebPage">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <link rel="icon" type="image/x-icon" href="./tungkinh.png">
  <title>Tịnh Tâm</title>
</head>

<body>
  <div style="position: absolute; width: 1px; height: 1px; z-index: 1; left: -100px; top: -200px" id="layer1"><img
      src="./src/khoi.png">
  </div>


  <link href="./src/bootstrap.min.css" rel="stylesheet">






  <div class="container" style="max-width: 100%; max-height: 90%; min-width: 80%; min-height: 90%;">



    <style>
      body {
        margin-top: 10;
        width: 100%;
        height: 60%;
        background-color: dimgrey;
      }

      canvas {
        position: absolute;
      }
    </style>


    <div style="margin-left: 45.5%;">
      <canvas id="canvas" style="bottom: 14%; left: 47.5%;height:400; width:80;"></canvas>
    </div>
    <script src="./src/1.js"></script>
    <img id="top" style="width: 100%;" src="./src/top.jpg">
    <img id="scen1" style="width: 100%;" src="./src/Scene1_.jpg" style="transition: opacity 1s">

    <img id="btnDacDao" onclick="location = './dacdao.html'" src="./dacdao.png"
      style="margin-left: 21%; margin-top: 10; height: 11%;border-radius: 1em;">

    <img id="btnTungKinh" src="./tungkinh.png"
      style="position: fixed; left: 48%; bottom: 2.5%; height: 7%; z-index: 500;">

    <img id="btnCungDuong" src="./cungduong.png" onclick="location = './cungduong.html'"
      style="margin-left: 40%; margin-top: 10; height: 11%; border-radius: 1em;">



    <style>
      #btnTungKinh,
      #btnDacDao,
      #btnCungDuong {
        opacity: 0.8;
      }

      #btnTungKinh:hover,
      #btnDacDao:hover,
      #btnCungDuong:hover {
        opacity: 1;
      }

      .off {
        display: none;
      }

      .fakeOff {
        opacity: 0;
      }

      #scen1 {
        transition: all 1.5s linear;
      }
    </style>


  </div>




  <script>

    setTimeout(() => alert("bấm vô Chú Tiểu để (bật/tắt)  tụng kinh"), 2500);


    let musicIdx = 0;
    let musicArr = [
      new Audio("/music/b4.mp3"),
      new Audio("/music/b2.mp3"),
      new Audio("/music/b5.mp3"),
      new Audio("/music/b3.mp3"),
      new Audio("/music/b1.mp3")
    ];

    let canvasSmoke = document.getElementById("canvas");
    let body = document.getElementsByTagName("BODY")[0];
    let myAudio = musicArr[musicIdx];
    let isOnAudio = false;

    let btnDacDao = document.getElementById("btnDacDao");
    let btnCungDuong = document.getElementById("btnCungDuong");
    let btnTungKinh = document.getElementById("btnTungKinh");

    function hideDacDaoCungDuong() {
      btnCungDuong.style.display = "none";
      btnDacDao.style.display = "none";
    }
    function showDacDaoCungDuong() {
      btnCungDuong.style.display = "inline";
      btnDacDao.style.display = "inline";
    }

    document.getElementById("btnTungKinh").onclick = () => {
      isOnAudio = !isOnAudio;
      if (isOnAudio) {
        body.webkitRequestFullscreen();
        scen1.src = "./src/Scene3.jpg";
        document.getElementById("top").style.display = "none";
        scen1.classList.add("off");
        scen1.classList.add("fakeOff");
        setTimeout(() => { scen1.classList.remove('off'); }, 10);
        setTimeout(() => { scen1.classList.remove('fakeOff'); }, 20);
        hideDacDaoCungDuong();
        canvasSmoke.style.bottom = "18%";
        canvasSmoke.style.left = "47%";
        btnTungKinh.style.height = "6%";


        if (musicIdx === musicArr.length) musicIdx = 0;
        myAudio = musicArr[musicIdx++];
        myAudio.play();
        myAudio.addEventListener("ended", () => {
          myAudio.currentTime = 0;
          myAudio.pause();

          if (musicIdx > musicArr.length -1) musicIdx = 0;
          myAudio = musicArr[musicIdx++];
          myAudio.play();
          isOnAudio = true;
        })
      } else {
        myAudio.pause();
        myAudio.currentTime = 0;
        document.webkitExitFullscreen();
        scen1.src = "./src/Scene1_.jpg";

        document.getElementById("top").style.display = "block";
        canvasSmoke.style.bottom = "14%";
        canvasSmoke.style.left = "47.5%";
        btnTungKinh.style.height = "7%";





        showDacDaoCungDuong();
      }
    }





  </script>



</body>

</html>
